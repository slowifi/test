import FunctionTest as FT;

const s = StringBuffer(1024);

function onPluginStart(){
	//
	s.insert(0); // initialize. Without the initialization, text does not appeared.
}

function beforeTriggerExec(){
	SetMemory(0x6509A0, SetTo, 0); //EUD터보
	//SetMemory(0x5124F0, SetTo, 29);	//x2배속
}

function afterTriggerExec(){
	EUDPlayerLoop()();
	const cp = getcurpl();
	//
	if(cp < 7){
		
		var main = dwread_epd(EPD(0x628438));
		//s.append("\nBeforWrite:");
		//s.append(main);
		once{CreateUnit(1, "Terran Marine", "Location 1", CurrentPlayer);}
		once{FT.SetStsFlg(main, 0x4000000, 1);} // invincibility
		//s.append("\nAfterWrite");
		//s.append(main);
		s.append("\nCurPos:");
		s.append(FT.GetPos(main, 0x028));
		s.append("\nOrderPos");
		s.append(FT.GetPos(main, 0x058));
		s.append("\nFinalDestinationPos");
		s.append(FT.GetPos(main, 0x010));
		s.Display();
		s.insert(0);
	}
	
	EUDEndPlayerLoop();
}